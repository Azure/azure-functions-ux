<div class="settings-group-wrapper">
  
    <h3>{{ 'feature_handlerMappingsName' | translate }}</h3>
  
    <div class="settings-wrapper">
  
      <!-- ---------------------------------------------------------- TABLE ----------------------------------------------------------- -->
      <tbl tblClass="tbl fixed stretch" [items]="groupArray?.controls" #handlerMappingsTable>
        <!--<tr class="header-row">
          <th class="one-third-col padded-col"></th>
          <th class="one-third-col padded-col"></th>
          <th class="one-third-col padded-col"></th>
          <th class="action-col"></th>
        </tr>-->
  
        <!-- Data/Content Rows -->
        <!-- If ARM call returned successfully, 'items' will not be null, so this will loop through and create a row for each handler mapping returned (if any) -->
        <tr *ngFor="let group of handlerMappingsTable.items">
          <td class="one-third-col padded-col" [class.pristine]="group.pristine" [class.dirty]="group.dirty">
            <click-to-edit [group]="group" name="extension">
  
              <textbox [control]="group.controls['extension']" [placeholder]="Resources.enterExtension | translate"></textbox>
  
            </click-to-edit>
          </td>

          <td class="one-third-col padded-col">
            <click-to-edit [group]="group" name="scriptProcessor">
  
              <textbox [control]="group.controls['scriptProcessor']" [placeholder]="Resources.enterScriptProcessor | translate"></textbox>
  
            </click-to-edit>
          </td>

          <td class="one-third-col padded-col">
            <click-to-edit [group]="group" name="arguments">
  
              <textbox [control]="group.controls['arguments']" [placeholder]="Resources.enterArguments | translate"></textbox>
  
            </click-to-edit>
          </td>

          <td class="action-col">
            <span class="fa fa-times delete" (click)="deleteHandlerMapping(group)"></span>
          </td>
        </tr>
  
        <!-- Placeholder/Message Row -->
        <!-- If ARM call did not return successfully or no handler mappings were returned, display a placeholder row -->
        <tr *ngIf="(!!groupArray && handlerMappingsTable.items.length === 0) || !groupArray">
          <td class="message-row" colspan="4">
            <!-- If ARM call returned successfully but no handler mappings were returned, display a row with message 'No records' -->
            <!-- If ARM call did not return successfully, display a row with the appropriate message based on permissions -->
            {{
              (!!groupArray && handlerMappingsTable.items.length === 0) ? ('emptyHandlerMappings' | translate) :
              (!groupArray && hasWritePermissions) ? (loadingFailureMessage || loadingMessage) :
              (!groupArray && !hasWritePermissions && showPermissionsMessage) ? permissionsMessage : ''
            }}
          </td>
        </tr>
  
      </tbl>
      <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
  
  
      <!-- --------------------------------------------------------  ADD LINK --------------------------------------------------------- -->
      <!-- If ARM call returned successfully user has write permissions, display 'add' link -->
      <div *ngIf="!!groupArray && hasWritePermissions" class="link add-setting" (click)="addHandlerMapping()">
        {{ 'addNewHandlerMapping' | translate }}
      </div>
  
      <!-- If ARM call did not return successfully or user does not have write permissions, display 'add' link disabled -->
      <div *ngIf="!groupArray || !hasWritePermissions" class="disabled-link add-setting">
        {{ 'addNewHandlerMapping' | translate }}
      </div>
      <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
  
  
      <!-- ---------------------------------------------------------- SHIELD ---------------------------------------------------------- -->
      <div *ngIf="!groupArray || !hasWritePermissions" class="shield">
        <div *ngIf="!groupArray && !!loadingFailureMessage && (hasWritePermissions || !showPermissionsMessage)" class="shield-message">
          {{ loadingFailureMessage }}
        </div>
      </div>
  
      <div *ngIf="!hasWritePermissions" class="shield transparent">
        <div *ngIf="showPermissionsMessage" class="shield-message">
          <p>{{ permissionsMessage }}</p>
          <button class="transparent" (click)="showPermissionsMessage=false">{{ showReadOnlySettingsMessage }}</button>
        </div>
      </div>
      <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
  
    </div>
  
  </div>